# 복사 생성자

- int num = 20; int &ref = num;
- int num(20);  int &ref(num);

위 두 방식의 초기화는 동일한 의미이다. 

첫 번째 문장은 두 번째와 같은 형태로 묵시적으로(자동) 변환된다. 객체 생성의 경우, 생성자 호출에서 다음과 같은 형태를 보게 된다면 클래스마다 멤버 대 멤버의 복사를 진행하는 **디폴트 복사 생성자**가 자동으로 삽입되는 것이다. 

이와 같은 변환을 막기 위해서는 *explicit 키워드*를 명시적으로 적어줘야 한다. 

즉, 클래스에는 class Simple { public: Simple() {} Simple(const Simple &copy) {} } 가 기본 형태로 생성되어 나온다. 

### 깊은 복사 VS 얕은 복사

디폴트 복사 생성자는 얕은 복사의 유형 중 하나이다.

얕은 복사(shallow copy)는 멤버변수가 힙의 메모리 공간을 참조하는 경우에 문제가 된다. 

많은 경우에 있어서 복사 생성자를 직접 정의할 필요가 없지만, 반드시 복사 생성자를 정의해야 하는 경우가 생긴다. 

바로 깊은 복사(deep copy)를 하고자 할 때, 복사 생성자를 명시적으로 정의해줘야 한다. 

### 복사 생성자의 호출 시점

1. 기존에 생성된 객체를 이용해서 새로운 객체를 초기화하는 경우
2. Call-by-value 방식의 함수 호출 과정에서 객체를 인자로 전달하는 경우
3. 객체를 반환하되, 참조형으로 반환하지 않는 경우

⇒ 객체를 새로 생성해야 하는데, 생성과 동시에 동일한 자료형의 객체로 초기화해야 할 때

***클래스 외부에서 객체의 멤버함수를 호출하기 위해 필요한 것** 

- 객체에 붙여진 이름
- 객체의 참조 값(객체 참조에 사용되는 정보)
- 객체의 주소 값

임시 객체는 반환을 위해서 생성되나, 이 객체는 메모리 공간에 존재하고 이 객체의 참조값이 반환되어 클래스 멤버함수의 호출이 가능해지는 것이다. 임시객체는 다음 행으로 넘어가면 바로 소멸되어 버리고, 참조자에 참조되는 임시객체는 바로 소멸되지 않는다.
